<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Трекер алкоголя</title>
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
  <div class="app-container">
    <header class="app-header">
      <h1 class="app-title">Трекер алкоголя</h1>
      <div class="month-nav" aria-label="Навигация по месяцам">
        <button id="prevMonth" class="nav-btn" title="Предыдущий месяц" aria-label="Предыдущий месяц">‹</button>
        <div id="monthLabel" class="month-label" aria-live="polite"></div>
        <button id="nextMonth" class="nav-btn" title="Следующий месяц" aria-label="Следующий месяц">›</button>
      </div>
    </header>

    <main class="main-layout">
      <section class="calendar-section">
        <div class="weekday-grid" aria-hidden="true">
          <div>Пн</div>
          <div>Вт</div>
          <div>Ср</div>
          <div>Чт</div>
          <div>Пт</div>
          <div>Сб</div>
          <div>Вс</div>
        </div>
        <div id="calendarGrid" class="calendar-grid" aria-label="Календарь для ввода"></div>
      </section>

      <aside class="stats-section">
        <h2>Статистика</h2>
        <div class="stat-row">
          <span>Всего алкоголя:</span>
          <strong id="totalAlcohol">0 г</strong>
        </div>
        <div class="stat-row">
          <span>Всего калорий:</span>
          <strong id="totalCalories">0 ккал</strong>
        </div>
        <div class="stat-row">
          <span>Средние калории:</span>
          <strong id="avgCalories">0 ккал/день</strong>
        </div>
        <p class="stat-note">Среднее считается по дням с записями.</p>
        <div class="actions">
          <button id="clearMonth" class="secondary">Очистить месяц</button>
          <button id="exportData" class="secondary">Экспорт</button>
          <input id="importFile" type="file" accept="application/json" hidden>
          <button id="importData" class="secondary">Импорт</button>
        </div>
      </aside>
    </main>
  </div>

  <dialog id="entryDialog">
    <form method="dialog" id="entryForm" class="entry-form">
      <h3>Запись за <span id="entryDateLabel"></span></h3>

      <label class="field">
        <span>Граммы чистого алкоголя</span>
        <input id="alcoholInput" type="number" inputmode="decimal" min="0" step="0.1" placeholder="например, 30">
      </label>

      <details class="calc">
        <summary>Калькулятор (по крепости и объёму)</summary>
        <div class="calc-grid">
          <label class="field">
            <span>Крепость, %</span>
            <input id="strengthInput" type="number" min="0" max="100" step="0.1" placeholder="например, 40">
          </label>
          <label class="field">
            <span>Объём, мл</span>
            <input id="volumeInput" type="number" min="0" step="1" placeholder="например, 50">
          </label>
          <div class="calc-actions">
            <button id="calcBtn" class="secondary" type="button">Рассчитать и подставить</button>
            <div id="calcPreview" class="calc-preview" aria-live="polite"></div>
          </div>
        </div>
      </details>

      <div class="dialog-actions">
        <button id="deleteEntry" class="danger" type="button" value="delete">Удалить</button>
        <div class="spacer"></div>
        <button id="cancelEntry" type="button" class="secondary">Отмена</button>
        <button id="saveEntry" type="button" value="default">Сохранить</button>
      </div>
    </form>
  </dialog>

  <script src="./app.js" defer></script>
</body>
</html>